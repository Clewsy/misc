#use rsync to bulk upload to nextcloud instance:
rsync -v -r --progress [directory] [user]@[server]:~/cloud/[target]
#above assumes symbolic link "cloud" directs to cloud files e.g. /var/www/html/nextcloud/data/b4t/files/


#Permissions must be set accordingly on the remote machine.
#For example,make  b4t a member of group www-data and give group www-data write access to the nextcloud dir.
sudo usermod -aG www-data b4t
sudo chmod -R g+w /var/www/html/nextcloud

#for example the following will copy the contents of MP3s on the local machine (in the working directory) into MP3s on the remote machine:
rsync -v -r --progress MP3s/ b4t@clews.pro:~/cl0ud/MP3s/

#Permissions must be set accordingly for thenew files copied onto the remote server.
sudo chown -R www-data:www-data /var/www/html/nextcloud

#run nextcloud script
cd /var/www/html/nextcloud
sudo -u www-data php occ files:scan --all
#possibly replace php with specific php version (e.g. php7.1) in the command above

#above scan but for use with a docker container
docker exec -u www-data nextcloud-app php occ files:scan --all
