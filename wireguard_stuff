
############################
#Key generation

#Create private key
uamsk 077
wg genkey > privatekey

#Create public key
wg pubkey < privatekey > publickey


############################
#Server setup

#Install wireguard

#open ufw firewall port on server
ufw allow 55505/udp

#enable routing on the server
sudo echo "net.ipv4.ip_forward = 1
net.ipv6.conf.all.forwarding = 1" >> /etc/sysctl.d/wg.conf

sudo sysctl --system

#move and rename server config file
sudo mv wg_clews_server_wg0.conf /etc/wireguard/wg0.conf

#start wg with the conf file and enable start at boot
sudo systemctl start wg-quick@wg0
sudo systemctl enable wg-quick@wg0


############################
#Client setup

#install wireguard app (from fdroid)

#generate qr code from client conf file
#may need to install qrencode
qrencode -t ansiutf8 < wg_clews_client.conf
